
@{
    ViewData["Title"] = "Editar";
}

<h2>Editar</h2>
<div class="col-xs-12 col-md-12">
    <form method="post" class="form-group" action="/Usuario/EditUser/">
        @Html.AntiForgeryToken()
        <label for="EmailUser">E-Mail:</label>
        <input type="text" name="Email" id="EmailUser" value="@Model.Email" class="form-control" />
        <br />
        <label for="NameUser">Nome:</label>
        <input type="text" name="Name" id="NameUser" value="@Model.Name" class="form-control" />
        <br />
        <label for="BirthUser">Data de Nascimento</label>
        <input type="text" name="DateOfBirth" id="BirthUser" value="@Model.DateOfBirth.ToString("dd/MM/yyyy")" class="form-control" />
        <br />
        <div class="col-md-12">
            <label for="PhotoUser">Foto de Perfil:</label>
            <br />
            <div class="col-xs-12 col-md-6">
                <img src="@Model.ProfilePhoto" onerror="this.src='https://image.flaticon.com/icons/svg/16/16480.svg'" width="100" height="100" id="profile_img" class="img-responsive img-circle" />
            </div>
            <div class="col-xs-12 col-md-6">
                <br />
                <input type="text" name="ProfilePhoto" id="PhotoUser" value="@Model.ProfilePhoto" class="form-control" />
            </div>
        </div>
        <br />
        <input type="submit" class="btn btn-default" id="Update_Sent" value="Enviar Alterações" />
    </form>
</div>
<script type="text/javascript">
    $("#PhotoUser").on("blur", function () {
        $("#profile_img").attr("src", $("#PhotoUser").val());
    });

    $("#BirthUser").on("keydown", function (data) {
        var result;
        if (!AdjustDate(data))
            result = ValidateDate(data.target.value);

        ManageErrors(result, document.getElementById("BirthGroup"));
        if (!result)
            $("#BirthGroup").find(".errorlabel").text("Data Inválida");
        else
            $("#BirthGroup").find(".errorlabel").text("");
    });

    $("#SendUser").on("click", function (data) {
        var results = false;

        $(".required").each(function (index) {
            if (this.value === "") {
                results = false;
                $(this).siblings(".errorlabel").html("Campo Requerido!");
            }
            else {
                $(this).siblings(".errorlabel").html("");
                results = true;
            }
        });

        if ($(".has-errors").length > 0)
            return false;

        return results;
    });
</script>
