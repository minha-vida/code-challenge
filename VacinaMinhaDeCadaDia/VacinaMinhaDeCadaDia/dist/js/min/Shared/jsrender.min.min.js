!function(e,t,r){"use strict";function n(e,t){t&&t.onError&&t.onError(e)===!1||(this.name="JsRender Error",this.message=e||"JsRender error")}function a(e,t){var r;e=e||{};for(r in t)e[r]=t[r];return e}function i(e,t,r){return(!te.rTag||arguments.length)&&($=e?e.charAt(0):$,N=e?e.charAt(1):N,S=t?t.charAt(0):S,U=t?t.charAt(1):U,I=r||I,e="\\"+$+"(\\"+I+")?\\"+N,t="\\"+S+"\\"+U,T="(?:(?:(\\w+(?=[\\/\\s\\"+S+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+S+"]|\\"+S+"(?!\\"+U+"))*?)",te.rTag=T+")",T=new RegExp(e+T+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),E=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[$,N,S,U,I]}function s(e,t){t||(t=e,e=r);var n,a,i,s,o=this,l=!t||"root"===t;if(e){if(s=o.type===t?o:r,!s)if(n=o.views,o._.useKey){for(a in n)if(s=n[a].get(e,t))break}else for(a=0,i=n.length;!s&&i>a;a++)s=n[a].get(e,t)}else if(l)for(;o.parent.parent;)s=o=o.parent;else for(;o&&!s;)s=o.type===t?o:r,o=o.parent;return s}function o(){var e=this.get("item");return e?e.index:r}function l(e,t){var n,i=this,s=t&&t[e]||(i.ctx||{})[e];return s=s===r?i.getRsc("helpers",e):s,s&&"function"==typeof s&&(n=function(){return s.apply(i,arguments)},a(n,s)),n||s}function u(e,t,n){var a,i,s,o=+n===n&&n,l=t.linkCtx;return o&&(n=(o=t.tmpl.bnds[o-1])(t.data,t,X)),s=n.args[0],(e||o)&&(i=l&&l.tag||{_:{inline:!l},tagName:e+":",flow:!0,_is:"tag"},i._.bnd=o,l&&(l.tag=i,n.ctx=k(n.ctx,l.view.ctx)),i.tagCtx=n,n.view=t,i.ctx=n.ctx||{},delete n.ctx,t._.tag=i,e="true"!==e&&e,e&&((a=t.getRsc("converters",e))||x("Unknown converter: {{"+e+":"))&&(i.depends=a.depends,s=a.apply(i,n.args)),s=o&&t._.onRender?t._.onRender(s,t,o):s,t._.tag=r),s}function c(e,t){for(var n=this,a=X[e],i=a&&a[t];i===r&&n;)a=n.tmpl[e],i=a&&a[t],n=n.parent;return i}function p(e,t,n,i){var s,o,l,u,c,p,g,d,f,m,h,v,_,y,b="",C=+i===i&&i,j=t.linkCtx||0,R=t.ctx,A=n||t.tmpl,T=t._;for("tag"===e._is&&(o=e,e=o.tagName),C&&(i=(v=A.bnds[C-1])(t.data,t,X)),g=i.length,o=o||j.tag,p=0;g>p;p++)f=i[p],h=f.tmpl,h=f.content=h&&A.tmpls[h-1],n=f.props.tmpl,p||n&&o||(_=t.getRsc("tags",e)||x("Unknown tag: {{"+e+"}}")),n=n||(o?o:_).template||h,n=""+n===n?t.getRsc("templates",n)||Y(n):n,a(f,{tmpl:n,render:w,index:p,view:t,ctx:k(f.ctx,R)}),o||(_._ctr?(o=new _._ctr,y=!!o.init,o.attr=o.attr||_.attr||r):o={render:_.render},o._={inline:!j},j&&(j.attr=o.attr=j.attr||o.attr,j.tag=o,o.linkCtx=j),(o._.bnd=v||j)&&(o._.arrVws={}),o.tagName=e,o.parent=c=R&&R.tag,o._is="tag",o._def=_),T.tag=o,f.tag=o,o.tagCtxs=i,o.flow||(m=f.ctx=f.ctx||{},l=o.parents=m.parentTags=R&&k(m.parentTags,R.parentTags)||{},c&&(l[c.tagName]=c),m.tag=o);for(o.rendering={},p=0;g>p;p++)f=o.tagCtx=i[p],o.ctx=f.ctx,!p&&y&&(o.init(f,j,o.ctx),y=r),(s=o.render)&&(d=s.apply(o,f.args)),b+=d!==r?d:f.tmpl?f.render():"";return delete o.rendering,o.tagCtx=o.tagCtxs[0],o.ctx=o.tagCtx.ctx,o._.inline&&(u=o.attr)&&"html"!==u&&(b="text"===u?Z.html(b):""),C&&t._.onRender?t._.onRender(b,t,C):b}function g(e,t,n,a,i,u,p,g){var d,f,m,h="array"===t,v={key:0,useKey:h?0:1,id:""+z++,onRender:g,bnds:{}},w={data:a,tmpl:i,content:p,views:h?[]:{},parent:n,ctx:e,type:t,get:s,getIndex:o,getRsc:c,hlp:l,_:v,_is:"view"};return n&&(d=n.views,f=n._,f.useKey?(d[v.key="_"+f.useKey++]=w,m=f.tag,v.bnd=h&&(!m||!!m._.bnd&&m)):d.splice(v.key=w.index=u!==r?u:d.length,0,w),w.ctx=e||n.ctx),w}function d(e){var t,r,n,a,i;for(t in W)if(a=W[t],(i=a.compile)&&(r=e[t+"s"]))for(n in r)r[n]=i(n,r[n],e,t,a)}function f(e,t,r){var n,a;return"function"==typeof t?t={depends:t.depends,render:t}:((a=t.template)&&(t.template=""+a===a?Y[a]||Y(a):a),t.init!==!1&&(n=t._ctr=function(){},(n.prototype=t).constructor=n)),r&&(t._parentTmpl=r),t}function m(n,a,i,s,o,l){function u(r){if(""+r===r||r.nodeType>0){try{p=r.nodeType>0?r:!E.test(r)&&t&&t(e.document).find(r)[0]}catch(a){}return p&&(r=p.getAttribute(G),n=n||r,r=Y[r],r||(n=n||"_"+H++,p.setAttribute(G,n),r=Y[n]=m(n,p.innerHTML,i,s,o,l))),r}}var c,p;return a=a||"",c=u(a),l=l||(a.markup?a:{}),l.tmplName=n,i&&(l._parentTmpl=i),!c&&a.markup&&(c=u(a.markup))&&c.fn&&(c.debug!==a.debug||c.allowCode!==a.allowCode)&&(c=c.markup),c!==r?(n&&!i&&(P[n]=function(){return a.render.apply(a,arguments)}),c.fn||a.fn?c.fn&&(a=n&&n!==c.tmplName?k(l,c):c):(a=h(c,l),y(c,a)),d(l),a):void 0}function h(e,t){var r,n=re.wrapMap||{},i=a({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:w},t);return t.htmlTag||(r=Q.exec(e),i.htmlTag=r?r[1].toLowerCase():""),r=n[i.htmlTag],r&&r!==n.div&&(i.markup=R.trim(i.markup),i._elCnt=!0),i}function v(e,t){function n(i,s,o){var l,u,c,p;if(i&&""+i!==i&&!i.nodeType&&!i.markup){for(c in i)n(c,i[c],s);return X}return s===r&&(s=i,i=r),i&&""+i!==i&&(o=s,s=i,i=r),p=o?o[a]=o[a]||{}:n,u=t.compile,(l=te.onBeforeStoreItem)&&(u=l(p,i,s,u)||u),i?null===s?delete p[i]:p[i]=u?s=u(i,s,o,e,t):s:s=u(r,s),u&&s&&(s._is=e),(l=te.onStoreItem)&&l(p,i,s,u),s}var a=e+"s";X[a]=n,W[e]=t}function w(e,t,n,a,i,s){var o,l,u,c,p,d,f,m,h,v,w,_,y,b=this,C=!b.attr||"html"===b.attr,j="";if(a===!0&&(f=!0,a=0),b.tag?(m=b,b=b.tag,v=b._,_=b.tagName,y=m.tmpl,t=k(t,b.ctx),h=m.content,m.props.link===!1&&(t=t||{},t.link=!1),n=n||m.view,e=e===r?n:e):y=b.jquery&&(b[0]||x('Unknown template: "'+b.selector+'"'))||b,y&&(!n&&e&&"view"===e._is&&(n=e),n&&(h=h||n.content,s=s||n._.onRender,e===n&&(e=n.data,i=!0),t=k(t,n.ctx)),n&&n.data!==r||((t=t||{}).root=e),y.fn||(y=Y[y]||Y(y)),y)){if(s=(t&&t.link)!==!1&&C&&s,w=s,s===!0&&(w=r,s=n._.onRender),R.isArray(e)&&!i)for(c=f?n:a!==r&&n||g(t,"array",n,e,y,a,h,s),o=0,l=e.length;l>o;o++)u=e[o],p=g(t,"item",c,u,y,(a||0)+o,h,s),d=y.fn(u,p,X),j+=c._.onRender?c._.onRender(d,p):d;else c=f?n:g(t,_||"data",n,e,y,a,h,s),v&&!b.flow&&(c.tag=b),j+=y.fn(e,c,X);return w?w(j,c):j}return""}function x(e){throw new X.sub.Error(e)}function _(e){x("Syntax error\n"+e)}function y(e,t,r,n){function a(t){t-=c,t&&g.push(e.substr(c,t).replace(M,"\\n"))}function i(t){t&&_('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}function s(s,u,f,m,h,v,w,x,y,b,k,j){v&&(h=":",m="html"),b=b||r;var R,A,T=u&&[],E="",$="",N="",S=!b&&!h&&!w;f=f||h,a(j),c=j+s.length,x?l&&g.push(["*","\n"+y.replace(V,"$1")+"\n"]):f?("else"===f&&(L.test(y)&&_('for "{{else if expr}}" use "{{else expr}}"'),T=d[6],d[7]=e.substring(d[7],j),d=p.pop(),g=d[3],S=!0),y&&(y=y.replace(M," "),E=C(y,T,t).replace(J,function(e,t,r){return t?N+=r+",":$+=r+",",""})),$=$.slice(0,-1),E=E.slice(0,-1),R=$&&$.indexOf("noerror:true")+1&&$||"",o=[f,m||!!n||"",E,S&&[],'params:"'+y+'",props:{'+$+"}"+(N?",ctx:{"+N.slice(0,-1)+"}":""),R,T||0],g.push(o),S&&(p.push(d),d=o,d[7]=c)):k&&(A=d[0],i(k!==A&&"else"!==A&&k),d[7]=e.substring(d[7],j),d=p.pop()),i(!d&&k),g=d[3]}var o,l=t&&t.allowCode,u=[],c=0,p=[],g=u,d=[,,,u];return e=e.replace(O,"\\$&"),i(p[0]&&p[0][3].pop()[0]),e.replace(T,s),a(e.length),(c=u[u.length-1])&&i(""+c!==c&&+c[7]===c[7]&&c[0]),b(u,r?e:t,r)}function b(e,r,n){var a,i,s,o,l,u,c,p,g,d,f,m,v,w,x,y,C,k,j,R,A,T,E,$,N,S=0,U="",I="",F={},K=e.length;for(""+r===r?(x=n?'data-link="'+r.replace(M," ").slice(1,-1)+'"':r,r=0):(x=r.tmplName||"unnamed",r.allowCode&&(F.allowCode=!0),r.debug&&(F.debug=!0),m=r.bnds,w=r.tmpls),a=0;K>a;a++)if(i=e[a],""+i===i)U+='\nret+="'+i+'";';else if(s=i[0],"*"===s)U+=""+i[1];else{if(o=i[1],l=i[2],k=i[3],u=i[4],I=i[5],j=i[7],(T="else"===s)||(S=0,m&&(v=i[6])&&(S=m.push(v))),(E=":"===s)?(o&&(s="html"===o?">":o+s),I&&($="prm"+a,I="try{var "+$+"=["+l+"][0];}catch(e){"+$+'="";}\n',l=$)):(k&&(y=h(j,F),y.tmplName=x+"/"+s,b(k,y),w.push(y)),T||(C=s,A=U,U=""),R=e[a+1],R=R&&"else"===R[0]),u+=",args:["+l+"]}",E&&v||o&&">"!==s){if(N=new Function("data,view,j,u"," // "+x+" "+S+" "+s+"\n"+I+"return {"+u+";"),N.paths=v,N._ctxs=s,n)return N;f=1}if(U+=E?"\n"+(v?"":I)+(n?"return ":"ret+=")+(f?(f=0,d=!0,'c("'+o+'",view,'+(v?(m[S-1]=N,S):"{"+u)+");"):">"===s?(p=!0,"h("+l+");"):(g=!0,"(v="+l+")!="+(n?"=":"")+'u?v:"";')):(c=!0,"{tmpl:"+(k?w.length:"0")+","+u+","),C&&!R){if(U="["+U.slice(0,-1)+"]",(n||v)&&(U=new Function("data,view,j,u"," // "+x+" "+S+" "+C+"\nreturn "+U+";"),v&&((m[S-1]=U).paths=v),U._ctxs=s,n))return U;U=A+'\nret+=t("'+C+'",view,this,'+(S||U)+");",v=0,C=0}}U="// "+x+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(g?",v":"")+(c?",t=j._tag":"")+(d?",c=j._cnvt":"")+(p?",h=j.converters.html":"")+(n?";\n":',ret="";\n')+(re.tryCatch?"try{\n":"")+(F.debug?"debugger;":"")+U+(n?"\n":"\nreturn ret;\n")+(re.tryCatch?"\n}catch(e){return j._err(e);}":"");try{U=new Function("data,view,j,u",U)}catch(V){_("Compiled template code:\n\n"+U,V)}return r&&(r.fn=U),U}function C(e,t,r){function n(n,d,f,m,h,v,w,x,b,k,j,R,A,T,E,I,K,M,V,O){function J(e,r,n,o,l,u,c){if(r&&(t&&("linkTo"===a&&(i=t.to=t.to||[],i.push(h)),(!a||s)&&t.push(h)),"."!==r)){var p=(n?'view.hlp("'+n+'")':o?"view":"data")+(c?(l?"."+l:n?"":o?"":"."+r)+(u||""):(c=n?"":o?l||"":r,""));return p+=c?"."+c:"","view.data"===p.slice(0,9)?p.slice(5):p}return e}var L;return v=v||"",f=f||d||R,h=h||b,k=k||K||"",w?void _(e):(t&&I&&!g&&!p&&(!a||s||i)&&(L=u[c],O.length-2>V-L&&(L=O.slice(L,V+1),I=N+":"+L+S,I=o[I]=o[I]||y($+I+U,r,!0),I.paths||C(L,I.paths=[],r),(i||t).push({_jsvOb:I}))),g?(g=!A,g?n:'"'):p?(p=!T,p?n:'"'):(f?(c++,u[c]=V++,f):"")+(M?c?"":a?(a=s=i=!1,"\b"):",":x?(c&&_(e),a=h,s=m,"\b"+h+":"):h?h.split("^").join(".").replace(F,J)+(k?(l[++c]=!0,"."!==h.charAt(0)&&(u[c]=V),k):v):v?v:E?(l[c--]=!1,E+(k?(l[++c]=!0,k):"")):j?(l[c]||_(e),","):d?"":(g=A,p=T,'"')))}var a,i,s,o=r.links,l={},u={0:-1},c=0,p=!1,g=!1;return(e+" ").replace(K,n)}function k(e,t){return e&&e!==t?t?a(a({},t),e):e:t&&a({},t)}function j(e){return D[e]||(D[e]="&#"+e.charCodeAt(0)+";")}if(!(t&&t.views||e.jsviews)){var R,A,T,E,$="{",N="{",S="}",U="}",I="^",F=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,K=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,M=/[ \t]*(\r\n|\n|\r)/g,V=/\\(['"])/g,O=/['"\\]/g,J=/\x08(~)?([^\x08]+)\x08/g,L=/^if\s/,Q=/<(\w+)[>\s]/,q=/[\x00`><"'&]/g,B=q,H=0,z=0,D={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},G="data-jsv-tmpl",P={},W={template:{compile:m},tag:{compile:f},helper:{},converter:{}},X={jsviews:"v1.0.0-beta",render:P,settings:{delimiters:i,debugMode:!0,tryCatch:!0},sub:{View:g,Error:n,tmplFn:y,parse:C,extend:a,error:x,syntaxError:_},_cnvt:u,_tag:p,_err:function(e){return re.debugMode?"Error: "+(e.message||e)+". ":""}};(n.prototype=new Error).constructor=n,o.depends=function(){return[this.get("item"),"index"]};for(A in W)v(A,W[A]);var Y=X.templates,Z=X.converters,ee=(X.helpers,X.tags),te=X.sub,re=X.settings;t?(R=t,R.fn.render=w):(R=e.jsviews={},R.isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}),R.render=P,R.views=X,R.templates=Y=X.templates,ee({"else":function(){},"if":{render:function(e){var t=this;return t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(e,t,r){for(var n,a,i=0;(n=this.tagCtxs[i])&&n.args.length;i++)if(n=n.args[0],a=!n!=!r[i].args[0],!!n||a)return a;return!1},flow:!0},"for":{render:function(e){var t=this,n=t.tagCtx,a=!arguments.length,i="",s=a||0;return t.rendering.done||(a?i=r:e!==r&&(i+=n.render(e),s+=R.isArray(e)?e.length:1),(t.rendering.done=s)&&(t.selected=n.index)),i},onArrayChange:function(e,t){var r,n=this,a=t.change;if(this.tagCtxs[1]&&("insert"===a&&e.target.length===t.items.length||"remove"===a&&!e.target.length||"refresh"===a&&!t.oldItems.length!=!e.target.length))this.refresh();else for(r in n._.arrVws)r=n._.arrVws[r],r.data===e.target&&r._.onArrayChange.apply(r,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),Z({html:function(e){return e!=r?String(e).replace(B,j):""},attr:function(e){return e!=r?String(e).replace(q,j):null===e?null:""},url:function(e){return e!=r?encodeURI(String(e)):null===e?null:""}}),i()}}(this,this.jQuery);